<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Marisa&#39;s blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://marisa.im/"/>
  <updated>2019-04-22T07:07:58.879Z</updated>
  <id>http://marisa.im/</id>
  
  <author>
    <name>marisa</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>centos7 éƒ¨ç½²Kubernetesé›†ç¾¤</title>
    <link href="http://marisa.im/2019/04/16/centos7-deploy-kubernetes-cluster/"/>
    <id>http://marisa.im/2019/04/16/centos7-deploy-kubernetes-cluster/</id>
    <published>2019-04-16T03:09:15.000Z</published>
    <updated>2019-04-22T07:07:58.879Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><ol><li>ç¦ç”¨selinux<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">setenforce 0 <span class="comment"># ä¸´æ—¶ç¦ç”¨selinux</span></span><br><span class="line">vi /etc/selinux/config</span><br><span class="line"></span><br><span class="line"><span class="comment"># This file controls the state of SELinux on the system.</span></span><br><span class="line"><span class="comment"># SELINUX= can take one of these three values:</span></span><br><span class="line"><span class="comment">#     enforcing - SELinux security policy is enforced.</span></span><br><span class="line"><span class="comment">#     permissive - SELinux prints warnings instead of enforcing.</span></span><br><span class="line"><span class="comment">#     disabled - No SELinux policy is loaded.</span></span><br><span class="line">SELINUX=disabled  <span class="comment"># æ”¹ä¸ºdisabled</span></span><br><span class="line"><span class="comment"># SELINUXTYPE= can take one of three two values:</span></span><br><span class="line"><span class="comment">#     targeted - Targeted processes are protected,</span></span><br><span class="line"><span class="comment">#     minimum - Modification of targeted policy. Only selected processes are protected.</span></span><br><span class="line"><span class="comment">#     mls - Multi Level Security protection.</span></span><br><span class="line">SELINUXTYPE=targeted</span><br></pre></td></tr></table></figure></li></ol><ol start="2"><li>å°†ä¸»æœºåå†™å…¥hostsæ–‡ä»¶ä¸­<code>vi /etc/hosts</code><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_0_11_centos ~]<span class="comment"># vi /etc/hosts</span></span><br><span class="line">127.0.0.1 VM_0_11_centos VM_0_11_centos <span class="comment"># åŠ å…¥è¿™è¡Œ</span></span><br><span class="line">::1 VM_0_11_centos VM_0_11_centos <span class="comment"># åŠ å…¥è¿™è¡Œ</span></span><br></pre></td></tr></table></figure></li></ol><ol start="3"><li><p>ç¦ç”¨swapåˆ†åŒº</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">swapoff -a <span class="comment"># ä¸´æ—¶ç¦ç”¨swapåˆ†åŒº</span></span><br><span class="line">vi /etc/fstab æ³¨é‡Šæ‰swapçš„é¡¹ <span class="comment"># æ°¸ä¹…ç¦ç”¨swapåˆ†åŒº</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å…³é—­swapä¹‹åå¯ä»¥ free -m æ£€éªŒ å¦‚æœSwapè¿™è¡Œéƒ½æ˜¯ 0 åˆ™è¯´æ˜swapè¢«å…³é—­</span></span><br><span class="line">[root@VM_0_11_centos ~]<span class="comment"># free -m</span></span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:            991         182          69           0         739         625</span><br><span class="line">Swap:             0           0           0</span><br></pre></td></tr></table></figure></li><li><p>é‡å¯æœåŠ¡å™¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure></li></ol><h2 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h2><h3 id="1-åŠ å…¥yum-repo"><a href="#1-åŠ å…¥yum-repo" class="headerlink" title="1. åŠ å…¥yum repo"></a>1. åŠ å…¥yum repo</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt;EOF &gt; /etc/yum.repos.d/centos.repo</span><br><span class="line">[centos]</span><br><span class="line">name=CentOS-7</span><br><span class="line">baseurl=http://ftp.heanet.ie/pub/centos/7/os/x86_64/</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=http://ftp.heanet.ie/pub/centos/7/os/x86_64/RPM-GPG-KEY-CentOS-7</span><br><span class="line"><span class="comment">#additional packages that may be useful</span></span><br><span class="line">[extras]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span> - Extras</span><br><span class="line">baseurl=http://ftp.heanet.ie/pub/centos/7/extras/x86_64/</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><h3 id="2-å®‰è£…docker"><a href="#2-å®‰è£…docker" class="headerlink" title="2.å®‰è£…docker"></a>2.å®‰è£…docker</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum -y update </span><br><span class="line">yum -y install docker</span><br><span class="line">systemctl <span class="built_in">enable</span> docker</span><br><span class="line">systemctl start docker</span><br></pre></td></tr></table></figure><h3 id="3-å®‰è£…kubeletã€kubeadm"><a href="#3-å®‰è£…kubeletã€kubeadm" class="headerlink" title="3. å®‰è£…kubeletã€kubeadm"></a>3. å®‰è£…kubeletã€kubeadm</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt;EOF &gt; /etc/yum.repos.d/kubernetes.repo</span><br><span class="line">[kubernetes]</span><br><span class="line">name=Kubernetes</span><br><span class="line">baseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-x86_64</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=1</span><br><span class="line">repo_gpgcheck=1</span><br><span class="line">gpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…kubelet kubeadm kubectl</span></span><br><span class="line">yum -y install kubelet kubeadm kubectl</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨kubelet</span></span><br><span class="line">systemctl start kubelet</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®kubeletå¼€æœºè‡ªå¯åŠ¨</span></span><br><span class="line">systemctl <span class="built_in">enable</span> kubelet</span><br></pre></td></tr></table></figure><h3 id="4-é¢å¤–çš„é…ç½®"><a href="#4-é¢å¤–çš„é…ç½®" class="headerlink" title="4. é¢å¤–çš„é…ç½®"></a>4. é¢å¤–çš„é…ç½®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt;EOF &gt;  /etc/sysctl.d/k8s.conf</span><br><span class="line">net.bridge.bridge-nf-call-ip6tables = 1</span><br><span class="line">net.bridge.bridge-nf-call-iptables = 1</span><br><span class="line">EOF</span><br><span class="line">sysctl --system</span><br><span class="line"><span class="built_in">echo</span> 1 &gt; /proc/sys/net/ipv4/ip_forward</span><br></pre></td></tr></table></figure><h3 id="5-åˆå§‹åŒ–é›†ç¾¤"><a href="#5-åˆå§‹åŒ–é›†ç¾¤" class="headerlink" title="5. åˆå§‹åŒ–é›†ç¾¤"></a>5. åˆå§‹åŒ–é›†ç¾¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubeadm init --pod-network-cidr=10.244.0.0/16</span><br></pre></td></tr></table></figure><h3 id="6-åšå¥½å¤‡ä»½"><a href="#6-åšå¥½å¤‡ä»½" class="headerlink" title="6. åšå¥½å¤‡ä»½"></a>6. åšå¥½å¤‡ä»½</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p <span class="variable">$HOME</span>/.kube</span><br><span class="line">sudo cp -i /etc/kubernetes/admin.conf <span class="variable">$HOME</span>/.kube/config</span><br><span class="line">sudo chown $(id -u):$(id -g) <span class="variable">$HOME</span>/.kube/config</span><br></pre></td></tr></table></figure><h3 id="7-é¢å¤–çš„æ“ä½œ"><a href="#7-é¢å¤–çš„æ“ä½œ" class="headerlink" title="7.é¢å¤–çš„æ“ä½œ"></a>7.é¢å¤–çš„æ“ä½œ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sysctl net.bridge.bridge-nf-call-iptables=1</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…flannelç½‘ç»œæ’ä»¶</span></span><br><span class="line">kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/a70459be0084506e4ec919aa1c114638878db11b/Documentation/kube-flannel.yml</span><br></pre></td></tr></table></figure><h3 id="8-æ£€éªŒæ˜¯å¦éƒ¨ç½²æˆåŠŸ"><a href="#8-æ£€éªŒæ˜¯å¦éƒ¨ç½²æˆåŠŸ" class="headerlink" title="8.æ£€éªŒæ˜¯å¦éƒ¨ç½²æˆåŠŸ"></a>8.æ£€éªŒæ˜¯å¦éƒ¨ç½²æˆåŠŸ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">kubectl get nodes</span><br><span class="line"></span><br><span class="line">[root@VM_0_11_centos ~]<span class="comment"># kubectl get nodes</span></span><br><span class="line">NAME             STATUS   ROLES    AGE   VERSION</span><br><span class="line">VM_0_11_centos   Ready    master   14d   v1.14.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># é»˜è®¤masterèŠ‚ç‚¹æ˜¯ä¸èƒ½è°ƒåº¦pod ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è§£é™¤é™åˆ¶</span></span><br><span class="line">kubectl taint nodes --all node-role.kubernetes.io/master-</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‡†å¤‡å·¥ä½œ&quot;&gt;&lt;a href=&quot;#å‡†å¤‡å·¥ä½œ&quot; class=&quot;headerlink&quot; title=&quot;å‡†å¤‡å·¥ä½œ&quot;&gt;&lt;/a&gt;å‡†å¤‡å·¥ä½œ&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;ç¦ç”¨selinux&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td c
      
    
    </summary>
    
    
      <category term="centos7" scheme="http://marisa.im/tags/centos7/"/>
    
      <category term="kubernetes" scheme="http://marisa.im/tags/kubernetes/"/>
    
  </entry>
  
  <entry>
    <title>æŠŠä½ çš„åšå®¢æ”¾åœ¨å›½å¤–</title>
    <link href="http://marisa.im/2018/07/16/%E6%8A%8A%E4%BD%A0%E7%9A%84%E5%8D%9A%E5%AE%A2%E6%94%BE%E5%9C%A8%E5%9B%BD%E5%A4%96/"/>
    <id>http://marisa.im/2018/07/16/æŠŠä½ çš„åšå®¢æ”¾åœ¨å›½å¤–/</id>
    <published>2018-07-16T07:09:33.000Z</published>
    <updated>2018-07-20T03:41:46.168Z</updated>
    
    <content type="html"><![CDATA[<p>åšå®¢é¦–é€‰å½“ç„¶æ˜¯æ”¾åœ¨å›½å†…ï¼Œæ¯•ç«Ÿè®¿é—®åšå®¢çš„äººå¤§éƒ¨åˆ†åˆ†å¸ƒåœ¨å›½å†…ã€‚æ”¾åœ¨å›½å†…çš„è¯ï¼Œä¸‰æ¬¡æ¡æ‰‹æ—¶é—´ä¹ŸçŸ­ã€‚å½“ç„¶ä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œåšå®¢æ”¾å›½å†…ä¸ä»…è¦å¤‡æ¡ˆï¼Œè¿˜ä¼šå¯¹åšå®¢çš„å†…å®¹è¿›è¡Œå®¡æŸ¥ã€‚æ¥è¿™ä¸ªé¢˜ç›®æ¥è®²è®²å“ªäº›æ”¾åœ¨å›½å†…é€Ÿåº¦ä¹Ÿå¾ˆå¿«çš„æ–¹æ³•ã€‚</p><p>ğŸ‡­ğŸ‡° é¦™æ¸¯<br>é¦™æ¸¯çš„åœ°ç†ä¼˜åŠ¿ååˆ†æ˜æ˜¾ï¼Œç”±äºé è¿‘å¹¿ä¸œï¼Œæ·±åœ³ã€å¹¿å·çš„pingå€¼åŸºæœ¬ä¸Š7mså·¦å³ï¼Œå†åŠ ä¸Šé¦™æ¸¯åœ°åŒºä¸ç”¨å¤‡æ¡ˆï¼Œå¯ä»¥è¯´æ˜¯ç½‘ç«™æ”¾ç½®çš„é¦–é€‰ä½ç½®ã€‚<br>ğŸ‡²ğŸ‡´ æ¾³é—¨</p><p>ğŸ‡°ğŸ‡· éŸ©å›½</p><p>ğŸ‡·ğŸ‡º ä¼¯åŠ›</p><p>ğŸ‡¯ğŸ‡µ æ—¥æœ¬</p><p>ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡</p>]]></content>
    
    <summary type="html">
    
      æŠŠä½ çš„åšå®¢æ”¾åœ¨å›½å¤–
    
    </summary>
    
    
      <category term="å¤‡æ¡ˆ" scheme="http://marisa.im/tags/%E5%A4%87%E6%A1%88/"/>
    
      <category term="å»ºç«™" scheme="http://marisa.im/tags/%E5%BB%BA%E7%AB%99/"/>
    
  </entry>
  
  <entry>
    <title>ä¸Šç½‘æ–°å§¿åŠ¿</title>
    <link href="http://marisa.im/2018/07/16/%E4%B8%8A%E7%BD%91%E6%96%B0%E5%A7%BF%E5%8A%BF/"/>
    <id>http://marisa.im/2018/07/16/ä¸Šç½‘æ–°å§¿åŠ¿/</id>
    <published>2018-07-16T06:40:59.000Z</published>
    <updated>2018-07-20T03:41:44.208Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><p>åœ¨å…¬å¸å·²ç»ä¸¤å‘¨æ²¡å•¥äº‹å¹²äº†ï¼Œæ‰€ä»¥ <del>å†™ç‚¹æ–‡ç« æ¥æ¶ˆç£¨æ—¶é—´</del> ç»™å¤§å®¶è®²è®²æ€ä¹ˆä¸Šç½‘ã€‚ç»å¸¸æ²¡äº‹åšçš„è¯å°±å¾ˆæ— èŠï¼Œè¦æ˜¯æœ‰äº‹è®©æˆ‘åšå°±å¥½äº†(é€ƒã€‚</p><p>å…³äºä¸Šç½‘ï¼Œç›¸ä¿¡å¤§å®¶éƒ½ä¼šä¸Šç½‘ã€‚æœ‰äººä¼šè¯´ä¸Šç½‘ä¸å°±æ˜¯æ‰“å¼€æµè§ˆå™¨è¾“å…¥ç½‘å€é‚£ä¹ˆç®€å•ä¹ˆï¼Œæœ‰ä»€ä¹ˆå¥½è¯´çš„ã€‚å…¶å®ä¸Šç½‘é‡Œé¢å¤§æœ‰æ–‡ç« å¯åšã€‚</p><p>ä¸Šç½‘å…¶å®å°±æ˜¯è¾“å…¥ä¸€ä¸ªåŸŸåï¼Œç„¶åè¿›è¡ŒDNSè§£æï¼Œè·å–åˆ°IPä¹‹åè¿›è¡Œä¸‰æ¬¡æ¡æ‰‹ï¼Œå»ºç«‹è¿æ¥åï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯è¯·æ±‚htmlå’Œå…¶ä»–èµ„æºã€‚</p><p>ç¨‹åºå‘˜å¯¹ä¸Šç½‘çš„ç†è§£å¯èƒ½åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œä½†å¯¹å»ºç«‹è¿æ¥èµ°ä»€ä¹ˆçº¿è·¯æ˜¯ä¸æ¸…æ¥šã€‚ç”šè‡³è®¤ä¸ºå»ºç«‹è¿æ¥èµ°ä»€ä¹ˆçº¿è·¯é»˜è®¤éƒ½æ˜¯èµ°ç›´è¿çš„ã€‚</p><p>è¿æ¥å¤–å›½çš„äº’è”ç½‘è‚¯å®šæ˜¯é€šè¿‡å…‰çº¤è¿æ¥çš„ï¼Œè®©æˆ‘ä»¬å…ˆçœ‹ä¸‹ä¸–ç•Œçš„æµ·ç¼†å›¾ã€‚å¯ä»¥çœ‹åˆ°å¤©æœçš„æµ·ç¼†å‡ºå£åªæœ‰ä¸‰ä¸ªï¼Œåˆ†åˆ«ä¸ºï¼šé’å²›ã€ä¸Šæµ·ã€å¹¿å·ã€‚æ˜¯ä¸æ˜¯æˆ‘ä»¬ä¸Šå›½å¤–çš„ç½‘ä¹Ÿèµ°çš„è¿™ä¸‰ä¸ªå‡ºå£ã€‚</p><p><strong>æ€»ç»“ä¸€ä¸‹ï¼š</strong><br>å‡ºå›½è·¯ç”±ï¼šåŒ—äº¬ã€ä¸Šæµ·ã€å¹¿å·<br>ç‰©ç†è·¯ç”±ï¼šé’å²›ã€ä¸Šæµ·ã€å¹¿å·</p><p>åœ¨åŠå®½å¸¦çš„æ—¶å€™ï¼Œç»å¸¸ä¼šé‡åˆ°è¿™ç§é—®é¢˜ï¼šæˆ‘è¯¥æ˜¯åŠç”µä¿¡å®½å¸¦å¥½è¿˜æ˜¯é¢„ç®—å°‘åŠä¸ªç§»åŠ¨å®½å¸¦ä¹Ÿèƒ½ç”¨ï¼Œè¿™å°±æ¶‰åŠåˆ°å®½å¸¦å“è´¨çš„é—®é¢˜äº†ã€‚</p><p><strong>æ€»ç»“ä¸€ä¸‹ï¼š</strong><br>å¸¦å®½å“è´¨çš„æ¯”è¾ƒï¼š<br>CUII &gt; CN2 &gt; ç”µä¿¡ &gt; è”é€š &gt; ç§»åŠ¨ &gt; é•¿åŸå®½å¸¦(é¹åšå£«)  å—æ–¹<br>CUII &gt; CN2 &gt; è”é€š &gt; ç”µä¿¡ &gt; ç§»åŠ¨ &gt; é•¿åŸå®½å¸¦(é¹åšå£«)  åŒ—æ–¹</p><h2 id="ä¸ºä»€ä¹ˆä¸Šå›½å¤–ç½‘çš„é‚£ä¹ˆæ…¢ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä¸Šå›½å¤–ç½‘çš„é‚£ä¹ˆæ…¢ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä¸Šå›½å¤–ç½‘çš„é‚£ä¹ˆæ…¢ï¼Ÿ"></a>ä¸ºä»€ä¹ˆä¸Šå›½å¤–ç½‘çš„é‚£ä¹ˆæ…¢ï¼Ÿ</h2><p>å› ä¸ºå›½å†…çš„å›½é™…å‡ºå£æ¯”è¾ƒå°ï¼Œåœ¨å¤§å®¶çš„å®½å¸¦éƒ½åœ¨100Mã€200Mçš„æƒ…å†µä¸‹ï¼Œå›½é™…å‡ºå£å¹¶æ²¡æœ‰æ‰©å®¹å°±ä¼šå›½é™…å¸¦å®½ä¸è¶³ï¼Œæ‰€ä»¥ä¼šæ˜¾å¾—æ¯”è¾ƒæ…¢ã€‚</p><h2 id="ä¸ºä»€ä¹ˆç©å›½å¤–çš„æ¸¸æˆé‚£ä¹ˆå¡ï¼Œå¿…é¡»è¦å¼€åŠ é€Ÿå™¨ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆç©å›½å¤–çš„æ¸¸æˆé‚£ä¹ˆå¡ï¼Œå¿…é¡»è¦å¼€åŠ é€Ÿå™¨ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆç©å›½å¤–çš„æ¸¸æˆé‚£ä¹ˆå¡ï¼Œå¿…é¡»è¦å¼€åŠ é€Ÿå™¨ï¼Ÿ"></a>ä¸ºä»€ä¹ˆç©å›½å¤–çš„æ¸¸æˆé‚£ä¹ˆå¡ï¼Œå¿…é¡»è¦å¼€åŠ é€Ÿå™¨ï¼Ÿ</h2><p>å…ˆè¯´è¯´åŠ é€Ÿå™¨çš„åŸç†ã€‚åŠ é€Ÿå™¨è®©ä½ ç©æ¸¸æˆä¸å¡å°±æ˜¯æ¸¸æˆçš„åŒ…èµ°é«˜å“è´¨çš„çº¿è·¯ï¼Œæ‰€ä»¥ä¸ä¼šå¡ã€‚ä»¥åƒé¸¡ä¸ºä¾‹ï¼Œåƒé¸¡çš„ä¸œå—æœä»¥å‰ä¸åœ¨é¦™æ¸¯ï¼Œç°åœ¨æ¬åˆ°Microsofté¦™æ¸¯ã€‚</p>]]></content>
    
    <summary type="html">
    
      ä¸Šç½‘æ–°å§¿åŠ¿
    
    </summary>
    
    
      <category term="ä¸Šç½‘" scheme="http://marisa.im/tags/%E4%B8%8A%E7%BD%91/"/>
    
      <category term="å®½å¸¦" scheme="http://marisa.im/tags/%E5%AE%BD%E5%B8%A6/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntuå¼€å¯HTTPSå’ŒHTTP2</title>
    <link href="http://marisa.im/2017/03/06/Ubuntu%E5%BC%80%E5%90%AFHTTPS%E5%92%8CHTTP2/"/>
    <id>http://marisa.im/2017/03/06/Ubuntuå¼€å¯HTTPSå’ŒHTTP2/</id>
    <published>2017-03-06T14:47:52.000Z</published>
    <updated>2018-07-05T02:12:52.774Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦è®°å½•ä¸€ä¸‹ä»æ— åˆ°å¼€å¯HTTPSå’ŒHTTP2çš„è¿‡ç¨‹ã€‚</p><a id="more"></a><h3 id="è¿è¡Œç¯å¢ƒ"><a href="#è¿è¡Œç¯å¢ƒ" class="headerlink" title="è¿è¡Œç¯å¢ƒ"></a>è¿è¡Œç¯å¢ƒ</h3><ul><li>Ubuntu 16.04 LTS</li><li>Nging 1.10.0</li><li>OpenSSL 1.0.2g</li></ul><h3 id="ä¸€ã€å®‰è£…æœ€æ–°ç‰ˆæœ¬-Nginx"><a href="#ä¸€ã€å®‰è£…æœ€æ–°ç‰ˆæœ¬-Nginx" class="headerlink" title="ä¸€ã€å®‰è£…æœ€æ–°ç‰ˆæœ¬ Nginx"></a>ä¸€ã€å®‰è£…æœ€æ–°ç‰ˆæœ¬ Nginx</h3><p><strong>é¦–å…ˆæ›´æ–°ä¸‹ apt-get</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure><p><strong>å®‰è£… nginx</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install nginx</span><br></pre></td></tr></table></figure><p>å®‰è£…ç»“æŸåï¼Œé€šè¿‡å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹ Nginx ç‰ˆæœ¬ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx -v</span><br></pre></td></tr></table></figure><p>åº”è¯¥è¿”å›å¦‚ä¸‹ç»“æœ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Ouput of sudo nginx -v</span><br><span class="line">nginx version: nginx/1.10.0 (Ubuntu)</span><br></pre></td></tr></table></figure><h3 id="äºŒã€æ›´æ”¹-Nginx-ç›‘å¬ç«¯å£å¹¶å¼€å¯-HTTP2"><a href="#äºŒã€æ›´æ”¹-Nginx-ç›‘å¬ç«¯å£å¹¶å¼€å¯-HTTP2" class="headerlink" title="äºŒã€æ›´æ”¹ Nginx ç›‘å¬ç«¯å£å¹¶å¼€å¯ HTTP2"></a>äºŒã€æ›´æ”¹ Nginx ç›‘å¬ç«¯å£å¹¶å¼€å¯ HTTP2</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/nginx/sites-available/default</span><br></pre></td></tr></table></figure><p>æ‰¾åˆ°ä¸‹åˆ—å‡ è¡Œã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">listen 80 default_server;</span><br><span class="line">listen [::]:80 default_server;</span><br></pre></td></tr></table></figure></p><p>æ›´æ”¹ä¸º<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">listen 443 ssl http2 default_server;</span><br><span class="line">listen [::]:443 ssl http2 default_server;</span><br></pre></td></tr></table></figure></p><h3 id="ä¸‰ã€æ›´æ”¹æœåŠ¡å™¨å"><a href="#ä¸‰ã€æ›´æ”¹æœåŠ¡å™¨å" class="headerlink" title="ä¸‰ã€æ›´æ”¹æœåŠ¡å™¨å"></a>ä¸‰ã€æ›´æ”¹æœåŠ¡å™¨å</h3><p>è¿˜æ˜¯åœ¨defaultæ–‡ä»¶ä¸­ï¼Œæ›´æ”¹server_name<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">server_name example.com;</span><br></pre></td></tr></table></figure></p><p>åˆ°æ­¤è¿™ä¸€æ­¥ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤æµ‹è¯•NginxæœåŠ¡é…ç½®æ˜¯å¦æ­£ç¡®ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx -t</span><br></pre></td></tr></table></figure></p><p>å¦‚æœä½ ä¸Šè¿°æ­¥éª¤éƒ½æ²¡æœ‰é—®é¢˜ï¼Œåº”è¯¥å¾—åˆ°å¦‚ä¸‹çš„è¿”å›ç»“æœã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /etc/nginx/nginx.conf test is successful</span><br></pre></td></tr></table></figure></p><h3 id="å››ã€æ·»åŠ SSLè¯ä¹¦"><a href="#å››ã€æ·»åŠ SSLè¯ä¹¦" class="headerlink" title="å››ã€æ·»åŠ SSLè¯ä¹¦"></a>å››ã€æ·»åŠ SSLè¯ä¹¦</h3><p>å› ä¸ºHTTP2å»ºè®®å¼€å¯HTTPSï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå…è´¹çš„HTTPSè¯ä¹¦ï¼Œè¿™é‡Œæ¨èletsencryptã€‚<br>å¯é€šè¿‡å¦‚ä¸‹å‘½ä»¤å®‰è£… letsencryptã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install letsencrypt</span><br></pre></td></tr></table></figure></p><p>å®‰è£…å®Œæˆåï¼Œæ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤ç”ŸæˆSSLè¯ä¹¦ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">letsencrypt certonly</span><br></pre></td></tr></table></figure></p><p>ç”Ÿæˆè¿‡ç¨‹ç¬¬ä¸€æ­¥æ˜¯è®©ä½ å¡«å†™é‚®ç®±åœ°å€ã€‚<br>ç¬¬äºŒæ­¥æ˜¯è®©ä½ å¡«å†™åŸŸååœ°å€ã€‚å¡«å†™æ ¼å¼ä¸º example.com<br>è¯ä¹¦ç”Ÿæˆå®Œæ¯•åï¼Œä¼šå¾—åˆ°å¦‚ä¸‹ç»“æœã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Output:</span><br><span class="line">IMPORTANT NOTES:</span><br><span class="line"> - If you lose your account credentials, you can recover through</span><br><span class="line">   e-mails sent to sammy@digitalocean.com</span><br><span class="line"> - Congratulations! Your certificate and chain have been saved at</span><br><span class="line">   /etc/letsencrypt/live/example.com/fullchain.pem. Your</span><br><span class="line">   cert will expire on 2016-03-15. To obtain a new version of the</span><br><span class="line">   certificate in the future, simply run Let&apos;s Encrypt again.</span><br><span class="line"> - Your account credentials have been saved in your Let&apos;s Encrypt</span><br><span class="line">   configuration directory at /etc/letsencrypt. You should make a</span><br><span class="line">   secure backup of this folder now. This configuration directory will</span><br><span class="line">   also contain certificates and private keys obtained by Let&apos;s</span><br><span class="line">   Encrypt so making regular backups of this folder is ideal.</span><br><span class="line"> - If like Let&apos;s Encrypt, please consider supporting our work by:</span><br><span class="line"></span><br><span class="line">   Donating to ISRG / Let&apos;s Encrypt:   https://letsencrypt.org/donate</span><br><span class="line">   Donating to EFF:                    https://eff.org/donate-le</span><br></pre></td></tr></table></figure></p><p>è¯ä¹¦ä¿å­˜è·¯å¾„ä¸º /etc/letsencrypt/example.com/live/</p><p>å†æ¬¡ç¼–è¾‘default<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/nginx/sites-available/default</span><br></pre></td></tr></table></figure></p><p>æ·»åŠ å¦‚ä¸‹SSLé…ç½®ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;</span><br><span class="line">ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;</span><br></pre></td></tr></table></figure></p><h3 id="äº”ã€ä¸ºSSLè¿æ¥æé«˜åŠ å¯†å®‰å…¨ç³»æ•°"><a href="#äº”ã€ä¸ºSSLè¿æ¥æé«˜åŠ å¯†å®‰å…¨ç³»æ•°" class="headerlink" title="äº”ã€ä¸ºSSLè¿æ¥æé«˜åŠ å¯†å®‰å…¨ç³»æ•°"></a>äº”ã€ä¸ºSSLè¿æ¥æé«˜åŠ å¯†å®‰å…¨ç³»æ•°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo openssl dhparam -out /etc/nginx/ssl/dhparam.pem 2048</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ /etc/nginx/sites-available/default åŠ å…¥<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssl_dhparam  /etc/nginx/ssl/dhparam.pem;</span><br></pre></td></tr></table></figure></p><h3 id="å…­ã€é‡å®šå‘HTTPæµé‡åˆ°HTTPS"><a href="#å…­ã€é‡å®šå‘HTTPæµé‡åˆ°HTTPS" class="headerlink" title="å…­ã€é‡å®šå‘HTTPæµé‡åˆ°HTTPS"></a>å…­ã€é‡å®šå‘HTTPæµé‡åˆ°HTTPS</h3><p>åœ¨ default ä¸‹é‡å¼€ä¸€ä¸ª server<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 443 ssl http2 default_server;</span><br><span class="line">    listen [::]:443 ssl http2 default_server;</span><br><span class="line">    // other settings</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">       listen         80;</span><br><span class="line">       listen    [::]:80;</span><br><span class="line">       server_name    example.com;</span><br><span class="line">       return         301 https://$server_name$request_uri;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="ä¸ƒã€é‡å¯-Nginx-æœåŠ¡"><a href="#ä¸ƒã€é‡å¯-Nginx-æœåŠ¡" class="headerlink" title="ä¸ƒã€é‡å¯ Nginx æœåŠ¡"></a>ä¸ƒã€é‡å¯ Nginx æœåŠ¡</h3><p>è‡³æ­¤ï¼ŒNginxæœåŠ¡éƒ½é…ç½®å®Œæˆäº†ã€‚ä½ çš„é…ç½®åº”è¯¥å¦‚ä¸‹æ‰€ç¤ºã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen 443 ssl http2 default_server;</span><br><span class="line">        listen [::]:443 ssl http2 default_server;</span><br><span class="line"></span><br><span class="line">        root /var/www/html;</span><br><span class="line"></span><br><span class="line">        index index.html index.htm index.nginx-debian.html;</span><br><span class="line"></span><br><span class="line">        server_name example.com;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">                try_files $uri $uri/ =404;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ssl_certificate /etc/nginx/ssl/example.com.crt;</span><br><span class="line">        ssl_certificate_key /etc/nginx/ssl/example.com.key;</span><br><span class="line">        ssl_dhparam /etc/nginx/ssl/dhparam.pem;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">       listen         80;</span><br><span class="line">       listen    [::]:80;</span><br><span class="line">       server_name    example.com;</span><br><span class="line">       return         301 https://$server_name$request_uri;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä¸ºäº†ä¿å­˜è‡³æ­¤çš„ä¿®æ”¹ï¼Œé‡å¯NginxæœåŠ¡ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service nginx restart</span><br></pre></td></tr></table></figure></p><h3 id="å…«ã€å¤§åŠŸå‘Šæˆ"><a href="#å…«ã€å¤§åŠŸå‘Šæˆ" class="headerlink" title="å…«ã€å¤§åŠŸå‘Šæˆ"></a>å…«ã€å¤§åŠŸå‘Šæˆ</h3><p>ä½ çš„æœåŠ¡å™¨å·²ç»å¼€å¯äº†HTTP2å’ŒHTTPSï¼Œé‚£ä¹ˆæ€ä¹ˆæ£€æŸ¥ç½‘ç«™æ˜¯å¦å¼€å¯HTTP2åè®®å‘¢ã€‚<br>æ‰“å¼€Chromeå¼€å‘å·¥å…·ï¼Œå³é”®è¡¨å¤´å¼€å¯åè®®æ˜¾ç¤ºå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚<br><img src="https://assets.digitalocean.com/articles/nginx_http2/http2_check.png" alt="å¼€å¯åè®®æ˜¾ç¤º"><br>ç°åœ¨æˆ‘ä»¬çœ‹åˆ°ï¼Œæ‰€æœ‰çš„è¯·æ±‚éƒ½æ˜¯HTTP2è¯·æ±‚ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡ä¸»è¦è®°å½•ä¸€ä¸‹ä»æ— åˆ°å¼€å¯HTTPSå’ŒHTTP2çš„è¿‡ç¨‹ã€‚&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>åšå®¢æ‰€ç”¨æŠ€æœ¯</title>
    <link href="http://marisa.im/2017/01/07/%E5%8D%9A%E5%AE%A2%E6%89%80%E7%94%A8%E6%8A%80%E6%9C%AF/"/>
    <id>http://marisa.im/2017/01/07/åšå®¢æ‰€ç”¨æŠ€æœ¯/</id>
    <published>2017-01-07T13:58:51.000Z</published>
    <updated>2018-07-05T02:12:52.774Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ¥å»å¹´è‡ªå·±åŠ¨æ‰‹å†™ä¸€ä¸ªåšå®¢ï¼Œä½†æ‹–åˆ°ç°åœ¨è¿˜æ²¡å®Œæˆã€‚</p><a id="more"></a><p>æœ¬åšå®¢æ‰€ç”¨æŠ€æœ¯ä¸€è§ˆï¼š</p><ul><li>koa2</li><li>hexo</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ¥å»å¹´è‡ªå·±åŠ¨æ‰‹å†™ä¸€ä¸ªåšå®¢ï¼Œä½†æ‹–åˆ°ç°åœ¨è¿˜æ²¡å®Œæˆã€‚&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>2016å¹´æ€»ç»“</title>
    <link href="http://marisa.im/2017/01/01/2016%E5%B9%B4%E6%80%BB%E7%BB%93/"/>
    <id>http://marisa.im/2017/01/01/2016å¹´æ€»ç»“/</id>
    <published>2017-01-01T13:30:07.000Z</published>
    <updated>2018-07-05T02:12:52.774Z</updated>
    
    <content type="html"><![CDATA[<p>å¾ˆå¿«2016å¹´å°±è¿‡å»äº†ï¼Œå›é¡¾è¿™ä¸€å¹´å­¦åˆ°äº†ä¸å°‘ä¸œè¥¿ã€‚</p><a id="more"></a><p>ä»3æœˆ28å·ç¬¬ä¸€å¤©åˆ°å…¬å¸å®ä¹ ï¼Œé‚£æ—¶å€™ä»€ä¹ˆå¯¹æˆ‘éƒ½æ˜¯æ–°é²œçš„ã€‚å½“æ—¶è¿›å…¥çš„æ˜¯æŠ€æœ¯ä½“ç³»ï¼Œå¸¦æˆ‘çš„äººè®©æˆ‘åšçš„é¡¹ç›®æ˜¯ä¸€ä¸ªåå°ç®¡ç†ç³»ç»Ÿï¼Œä¸»è¦ç”¨åˆ°çš„æ˜¯<code>Bootstrap</code> å’Œ <code>jQuery</code>ã€‚å½“æ—¶ä¹Ÿæ²¡ç”¨æ¨¡æ¿ï¼Œé¡µé¢ç›´æ¥éƒ½æ˜¯.phpæ–‡ä»¶å†™çš„ï¼Œç”¨çš„<code>twig</code>ç²˜èµ·æ¥çš„ã€‚æ¯”å¦‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="keyword">include</span> <span class="string">"header.php"</span>&gt;</span><br><span class="line">&lt;<span class="keyword">include</span> <span class="string">"footer.php"</span>&gt;</span><br><span class="line"></span><br><span class="line">&#123;&#123; extends <span class="string">"template.php"</span>&#125;&#125;</span><br></pre></td></tr></table></figure><p>å½“æ—¶ï¼Œæˆ‘åˆšå¥½å­¦è¿‡<code>Django</code>ï¼Œé‡Œé¢çš„æ¨¡æ¿å¼•æ“é•¿çš„å’Œ<code>twig</code>ä¸€æ¨¡ä¸€æ ·ï¼Œæ‰€ä»¥é©¾è½»å°±ç†Ÿå¾ˆå¿«å°±é€‚åº”äº†ã€‚ä½†æ˜¯è¿™ç§æ–¹å¼æ¯•ç«Ÿæœ‰ç‚¹åŸå§‹ï¼Œè¿˜å¤„åœ¨åˆ€è€•ç«ç§çš„æ—¶ä»£ã€‚æˆ‘å‘å¸¦æˆ‘çš„äººæå‡ºäº†ä½¿ç”¨<code>webpack</code>å’Œ<code>vue.js</code> çš„ç»„ä»¶åŒ–çš„å¼€å‘æ–¹å¼ã€‚ä½†ä¼¼ä¹æ˜¯å› ä¸ºæˆ‘åˆšæ¥çš„ç¼˜æ•…ï¼Œå¥¹ä¹Ÿæ²¡æ”¾åœ¨å¿ƒä¸Šã€‚</p><p>åæ¥å°±è¿™ä¹ˆå¹²åˆ°äº†6æœˆåº•ï¼Œæˆ‘åˆšæ‹¿äº†å­¦ä½è¯ä»å­¦æ ¡å›æ¥ï¼Œé¢†å¯¼æŠŠæˆ‘è°ƒåˆ°äº†äº§å“éƒ¨é—¨ï¼Œé‡Œé¢ç”¨çš„å°±æ˜¯<code>webpack</code>å’Œ<code>vue.js</code>çš„æ–¹å¼ï¼Œä¸è¿‡å¥½åƒç¼ºå°‘å¼€å‘ç»éªŒï¼Œå‰é¢çš„äººæŒ–äº†ä¸å°‘çš„å‘ï¼Œè€Œä¸”æˆ‘å½“æ—¶ä¹Ÿä¸ç†Ÿæ‚‰ç»„ä»¶åŒ–æ€ä¹ˆå¼€å‘ï¼Œä¸€ç›´åˆ°12æœˆä»½ï¼Œæˆ‘æ‰æ…¢æ…¢é€‚åº”è¿‡æ¥ã€‚ä¸è¿‡ç”±äºé¡¹ç›®æ—©æœŸçš„å†³ç­–å¤±è¯¯ï¼Œåˆ°ç°åœ¨å¥½åƒä¹Ÿæ²¡æ³•æ”¹äº†ï¼Œæ¯”å¦‚æ²¡æœ‰ä½¿ç”¨<code>vue</code>å°è£…çš„æ¡†æ¶ã€æ²¡æœ‰ä½¿ç”¨<code>vuex</code>ç®¡ç†ç»„ä»¶çŠ¶æ€ã€ç»„ä»¶è®¾è®¡æœ‰é—®é¢˜ç­‰ç­‰ã€‚</p><p>16å¹´ä»åˆšè¿›å…¬å¸åªä¼š<code>Boostrap</code>å’Œ<code>jQuery</code>åˆ°ç°åœ¨çš„ä¼šä½¿ç”¨<code>vue.js</code>ã€<code>webpack</code>ã€<code>stylus</code>ç­‰ç­‰ï¼Œæˆ‘æˆé•¿äº†è®¸å¤šã€‚</p><p>17å¹´æˆ‘è¿˜æœ‰è®¸å¤šè¦å­¦ä¹ çš„åœ°æ–¹ï¼Œåˆ¶å®šäº†å‡ ä¸ªå¾®å°çš„ç›®æ ‡ã€‚</p><ul><li>haskell</li><li>Go</li><li>ç»§ç»­æé«˜å®¡ç¾</li><li>æé«˜ç§‘å­¦ä¸Šç½‘èƒ½åŠ›</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¾ˆå¿«2016å¹´å°±è¿‡å»äº†ï¼Œå›é¡¾è¿™ä¸€å¹´å­¦åˆ°äº†ä¸å°‘ä¸œè¥¿ã€‚&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>ç»™ä½ çš„ç½‘ç«™åŠ ä¸ŠHttps</title>
    <link href="http://marisa.im/2016/05/07/%E7%BB%99%E4%BD%A0%E7%9A%84%E7%BD%91%E7%AB%99%E5%8A%A0%E4%B8%8AHttps/"/>
    <id>http://marisa.im/2016/05/07/ç»™ä½ çš„ç½‘ç«™åŠ ä¸ŠHttps/</id>
    <published>2016-05-07T08:44:48.000Z</published>
    <updated>2018-07-05T02:12:52.774Z</updated>
    
    <content type="html"><![CDATA[<p>æ— è®ºæ˜¯æ‰‹æœºè¿˜æ˜¯PCä¸Šç½‘çš„æ—¶å€™ï¼Œå¦‚æœç½‘ç«™é‡‡ç”¨çš„æ˜¯æ™®é€šçš„Httpç½‘ç«™ï¼Œå¯èƒ½ä¼šè¢«è¿è¥å•†åŠ«æŒï¼Œå¹¶åœ¨ç›¸åº”é¡µé¢åŠ ä¸Šå¹¿å‘Šã€‚</p><a id="more"></a><h3 id="ä½¿ç”¨Httpsçš„å¥½å¤„"><a href="#ä½¿ç”¨Httpsçš„å¥½å¤„" class="headerlink" title="ä½¿ç”¨Httpsçš„å¥½å¤„"></a>ä½¿ç”¨Httpsçš„å¥½å¤„</h3><p>ä»¥å‰ç”¨httpåè®®çš„æ—¶å€™ï¼Œç­‰äºäº’è”ç½‘å…¬å¸ç»™ç”¨æˆ·å¯„è´§ï¼Œä½†éšä¾¿é€‰ä¸ªåŒ…è£…ç„¶åè®©è¿è¥å•†é…é€ç»™ç”¨æˆ·ã€‚è¿è¥å•†å…¬å¸ä¸ºäº†è‡ªå·±çš„åˆ©ç›Šï¼ŒæŠŠåŒ…è£…æ‹†å¼€ï¼Œåœ¨é‡Œé¢å¡æ»¡äº†å„ç§å¹¿å‘Šã€‚ç”šè‡³æœ‰å¯èƒ½ï¼Œç”¨æˆ·å°±ä¹°æœ¬ä¹¦ï¼Œç»“æœåŒ…è£…é‡Œè¢«è¿è¥å•†å¡äº†æ•´æ•´ä¸€ç®±ä¼ å•æˆ–è€…å°å¡ç‰‡é€äº†è¿‡å»ã€‚ç”šè‡³å¯èƒ½æ˜¯ä¸‹é¢çš„è¿™ç§å¡ç‰‡ã€‚</p><p><img src="http://r6.loli.io/BjMR7b.png" alt="enter image description here"></p><p>ç°åœ¨å¼€å§‹ä½¿ç”¨httpsåè®®äº†ï¼Œäº’è”ç½‘å…¬å¸ç»™ç”¨æˆ·å¯„è´§ï¼Œä¸è¿‡è¿™æ¬¡é€‰äº†ä¸€ä¸ªä¿é™©ç®±ç»™ä¸ç”¨æˆ·å¯„è´§ï¼Œå¼€ç®±å¯†ç é€šè¿‡å¦å¤–çš„æ¸ é“å‘Šè¯‰ç”¨æˆ·ï¼Œç„¶åè®©è¿è¥å•†ç»™ç”¨æˆ·é…é€è¿‡å»ã€‚è™½ç„¶è¿™æ ·æˆæœ¬é«˜äº†å¾ˆå¤šï¼Œä½†æ˜¯ç»ˆäºå®‰å…¨äº†ã€‚</p><h3 id="æ­å»ºå‡†å¤‡"><a href="#æ­å»ºå‡†å¤‡" class="headerlink" title="æ­å»ºå‡†å¤‡"></a>æ­å»ºå‡†å¤‡</h3><ul><li>Nginx</li><li>Git</li></ul><p><strong>å®‰è£… nginx</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install nginx</span><br></pre></td></tr></table></figure><p><strong>å®‰è£… Git</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install git</span><br></pre></td></tr></table></figure><h3 id="å¼€å§‹æ­å»º"><a href="#å¼€å§‹æ­å»º" class="headerlink" title="å¼€å§‹æ­å»º"></a>å¼€å§‹æ­å»º</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/letsencrypt/letsencrypt</span><br></pre></td></tr></table></figure><p>è¿›å…¥ç›¸åº”æ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./letsencrypt-auto certonly</span><br></pre></td></tr></table></figure><p>ä¼šæœ‰ä¸€æ®µæ—¶é—´çš„ä¸‹è½½ï¼Œå®Œæˆåå‡ºç°ä¸‹å›¾<br><img src="https://scarletmu.b0.upaiyun.com/blog/7524c1924522dcdf47190ebef0db5afc.png" alt="enter image description here"></p><p>è¿™é‡Œé€‰æ‹©ç¬¬äºŒé¡¹ï¼Œè¾“å…¥åŸŸå<br><img src="https://scarletmu.b0.upaiyun.com/blog/67aa65fd8990649bf5a251494a53e33c.png" alt="enter image description here"></p><p>ç„¶åè¾“å…¥è¦ç»‘å®šçš„åŸŸå,åŸŸåæ£€æµ‹å®Œæ¯•ä¹‹ååŒæ„ä»–çš„åè®®å³å¯,ç„¶åå°±ä¼šç»“æŸå›¾å½¢ç•Œé¢,æç¤ºæˆåŠŸå•¦!</p><p>åˆ°è¿™é‡Œæˆ‘ä»¬çš„Letâ€™s Encryptè¯ä¹¦å°±åˆ›å»ºå®Œæˆäº†</p><p>ä¸ºäº†æå‡å®‰å…¨æ€§,æˆ‘ä»¬éœ€è¦å»ºç«‹Diffie-Hellmanå¯†é’¥,è¿™é‡Œæ ¹æ®CPUæ€§èƒ½ä¸åŒè¦èŠ±ä¸å°‘æ—¶é—´</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl dhparam -out /etc/ssl/certs/dhparam.pem 2048</span><br></pre></td></tr></table></figure><p><strong>å®Œæˆåè¿›å…¥nginx.confè¿›è¡Œé…ç½®</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">server&#123;</span><br><span class="line">    listen 443 ssl;</span><br><span class="line">    </span><br><span class="line">    server_name åŸŸå;</span><br><span class="line">    // å¼•å…¥è¯ä¹¦,æç¤ºæˆåŠŸæ—¶ä¼šç»™ä½ è¯ä¹¦çš„ä½ç½®</span><br><span class="line">    ssl_certificate /etc/letsencrypt/live/ä½¿ç”¨çš„åŸŸå/fullchain.pem;</span><br><span class="line">    ssl_certificate_key /etc/letsencrypt/live/ä½¿ç”¨çš„åŸŸå/privkey.pem;</span><br><span class="line">        </span><br><span class="line">    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">    ssl_prefer_server_ciphers on;</span><br><span class="line">    ssl_dhparam /etc/ssl/certs/dhparam.pem;</span><br><span class="line">    ssl_ciphers &apos;ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:AES:CAMELLIA:DES-CBC3-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!aECDH:!EDH-DSS-DES-CBC3-SHA:!EDH-RSA-DES-CBC3-SHA:!KRB5-DES-CBC3-SHA&apos;;</span><br><span class="line">    ssl_session_timeout 1d;</span><br><span class="line">    ssl_session_cache shared:SSL:50m;</span><br><span class="line">    ssl_stapling on;</span><br><span class="line">    ssl_stapling_verify on;</span><br><span class="line">    add_header Strict-Transport-Security max-age=15768000;</span><br><span class="line">    location / &#123;</span><br><span class="line">        // åä»£ä¿¡æ¯</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">// 80ç«¯å£é‡å®šå‘è‡³443ç«¯å£</span><br><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name åŸŸå;</span><br><span class="line">    return 301 https://$host$request_uri;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é‡å¯nginxæœåŠ¡å™¨"><a href="#é‡å¯nginxæœåŠ¡å™¨" class="headerlink" title="é‡å¯nginxæœåŠ¡å™¨"></a>é‡å¯nginxæœåŠ¡å™¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service nginx restart</span><br></pre></td></tr></table></figure><p>è‡³æ­¤httpså·²ç»æ­å»ºå¥½äº†ï¼Œä½ å¯ä»¥å» <a href="https://www.ssllabs.com/ssltest/analyze.html" target="_blank" rel="noopener">ssllab</a> æµ‹è¯•è‡ªå·±ç½‘ç«™çš„httpså¼ºåº¦ã€‚ä¸€èˆ¬é€šè¿‡Letâ€™s encryptæä¾›çš„SSLè¯ä¹¦éƒ½æ˜¯A+çº§åˆ«ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ— è®ºæ˜¯æ‰‹æœºè¿˜æ˜¯PCä¸Šç½‘çš„æ—¶å€™ï¼Œå¦‚æœç½‘ç«™é‡‡ç”¨çš„æ˜¯æ™®é€šçš„Httpç½‘ç«™ï¼Œå¯èƒ½ä¼šè¢«è¿è¥å•†åŠ«æŒï¼Œå¹¶åœ¨ç›¸åº”é¡µé¢åŠ ä¸Šå¹¿å‘Šã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="nginx" scheme="http://marisa.im/tags/nginx/"/>
    
      <category term="let&#39;s encrypt" scheme="http://marisa.im/tags/let-s-encrypt/"/>
    
      <category term="https" scheme="http://marisa.im/tags/https/"/>
    
  </entry>
  
  <entry>
    <title>Djangoéƒ¨ç½²nginx</title>
    <link href="http://marisa.im/2016/04/27/Django%E9%83%A8%E7%BD%B2nginx/"/>
    <id>http://marisa.im/2016/04/27/Djangoéƒ¨ç½²nginx/</id>
    <published>2016-04-27T14:52:19.000Z</published>
    <updated>2018-07-05T02:12:52.774Z</updated>
    
    <content type="html"><![CDATA[<p>Djangoè‡ªå¸¦çš„ python manage.py runserveråªæä¾›æµ‹è¯•ç”¨ï¼Œåˆ°äº†å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œéœ€è¦ä½¿ç”¨nginxè¦åšè¯·æ±‚è½¬å‘ã€‚</p><a id="more"></a><h3 id="è¿è¡Œç¯å¢ƒ"><a href="#è¿è¡Œç¯å¢ƒ" class="headerlink" title="è¿è¡Œç¯å¢ƒ"></a>è¿è¡Œç¯å¢ƒ</h3><ul><li>Ubuntu 14.1</li><li>Python 2.7.10</li><li>Django 1.9.5</li></ul><h3 id="æ­å»ºå‡†å¤‡"><a href="#æ­å»ºå‡†å¤‡" class="headerlink" title="æ­å»ºå‡†å¤‡"></a>æ­å»ºå‡†å¤‡</h3><p><strong>é¦–å…ˆæ›´æ–°ä¸‹ apt-get</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure><p><strong>å®‰è£… nginx</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install nginx</span><br></pre></td></tr></table></figure><p><strong>ä¿®æ”¹ nginxé…ç½®æ–‡ä»¶ä¿¡æ¯ï¼Œä¸‹é¢ä»¥ baidu.com ä¸¾ä¾‹ã€‚</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/nginx/sites-available/baidu</span><br></pre></td></tr></table></figure><p><strong>ä¿®æ”¹ä¿¡æ¯ä¸ºå¦‚ä¸‹</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># the nginx server instance</span><br><span class="line">server &#123;</span><br><span class="line">    listen 0.0.0.0:80;</span><br><span class="line"></span><br><span class="line">    server_name baidu.com baidu;</span><br><span class="line">    access_log /var/log/nginx/baidu.log;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">      proxy_set_header Host $host;</span><br><span class="line">      proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line"></span><br><span class="line">      proxy_pass http://127.0.0.1:8000/;</span><br><span class="line">      proxy_redirect off;</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p><strong>é…ç½®å¥½ç½‘ç«™ä¿¡æ¯åï¼Œæ¥ç€åœ¨nginxå¯ç”¨è¯¥ç«™ç‚¹</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/nginx/sites-enabled/ </span><br><span class="line">ln -s /etc/nginx/sites-available/baidu baidu</span><br></pre></td></tr></table></figure><p><strong>é‡å¯nginx</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /etc/init.d/nginx restart</span><br></pre></td></tr></table></figure><p><strong>è¿›å…¥Djangoæ‰€åœ¨ç›®å½•</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /path/to/django_dir</span><br><span class="line">python manage.py runserver</span><br></pre></td></tr></table></figure><p><strong>ä½†æ˜¯æ­¤æ–¹æ³•ä¸€æ—¦SSHæ–­å¼€è¿æ¥ æœåŠ¡å™¨ä¹Ÿä¼šå…³é—­ï¼Œå¯ä»¥ä½¿ç”¨ screenæ¥ä¿æŒæœåŠ¡å™¨ä¸€ç›´å¼€å¯ã€‚</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install screen</span><br><span class="line">screen python manage.py runserver</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      Djangoè‡ªå¸¦çš„ python manage.py runserveråªæä¾›æµ‹è¯•ç”¨ï¼Œåˆ°äº†å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œéœ€è¦ä½¿ç”¨nginxè¦åšè¯·æ±‚è½¬å‘
    
    </summary>
    
    
      <category term="django" scheme="http://marisa.im/tags/django/"/>
    
      <category term="nginx" scheme="http://marisa.im/tags/nginx/"/>
    
      <category term="python" scheme="http://marisa.im/tags/python/"/>
    
  </entry>
  
</feed>
